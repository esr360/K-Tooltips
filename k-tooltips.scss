//=================================================================
// Tooltips
//=================================================================

// Settings
//-----------------------------------------------------------------

// Configurable/Default Options
$tooltip-options: (
	// Layout & Positioning
	position       : top,
	transition     : 0.4s,
	max-width      : 500px,
	z-index        : 9999,
	// Appearance
	radius         : 0.25em,
	padding        : 1em,
	arrow-size     : 0.5em,
	text-color     : white,
	bg-color       : rgba(0, 0, 0, 0.75),
	// Typography
	font-size      : 1em,
	text-transform : none,
	font-weight    : normal
);

// Custom Styles
$tooltip-styles: (
	light: (
		bg-color       : rgba(white, 0.8),
		text-color     : #444
	),
);

$tooltip-positions: (
	top, bottom, left, right
);
		
// Utilities
//-----------------------------------------------------------------

@function tooltip($tooltip-option) {
    @return map-get($tooltip-options, $tooltip-option);
}

@function tooltip-style($tooltip-style) {
	@return map-get(map-get($tooltip-styles, light), $tooltip-style);
}

// CSS Triangle
//-----------------------------------------------------------------

@mixin triangle(
	$position: tooltip(position), 
	$color: tooltip(bg-color),
	$size: tooltip(arrow-size)
) {
	&:after {
		content:'';
		position: absolute;
		width: 0;
		height: 0;
		margin-left: -$size;
		@if $position == top {
			top: 100%;
			left: 50%;
			border-left: solid $size transparent;
			border-right: solid $size transparent;
			border-top: solid $size $color;
		} @else if $position == bottom {
			bottom: 100%;
			left: 50%;
			border-left: solid $size transparent;
			border-right: solid $size transparent;
			border-bottom: solid $size $color;
		} @else if $position == left {
			top: 50%;
			right: -$size;
			transform: translateY(-50%);
			border-top: solid $size transparent;
			border-bottom: solid $size transparent;
			border-left: solid $size $color;
		} @else if $position == right {
			top: 50%;
			right: 100%;
			transform: translateY(-50%);
			border-top: solid $size transparent;
			border-bottom: solid $size transparent;
			border-right: solid $size $color;
		}
	}
}
		
// Tooltip
//-----------------------------------------------------------------

[data-tooltip] {
		
	position: relative;
	cursor: pointer;	
	
	@at-root [class*="tooltip-wrapper-"] {
		text-align: center;
	}
	
	@at-root .tooltip-content {
		
		// Layout & Positioning
		position: absolute;
		display: inline-block;
		white-space: pre-wrap;
		padding: tooltip(padding);
		max-width: tooltip(max-width);
		transition: tooltip(transition);
		z-index: tooltip(z-index);
		
		// Appearance
		border-radius: tooltip(radius);
		color: tooltip(text-color);
		background-color: tooltip(bg-color);
		
		// Typography
		font-size: tooltip(font-size);
		text-transform: tooltip(text-transform);
		font-weight: tooltip(font-weight);
		
		// Hide by default
		opacity: 0;
		visibility: hidden;
		
		// Show when parent component is hovered
        [data-tooltip]:hover & {
			opacity: 1;
			visibility: visible;
        }
		
		// Positions
		@each $tooltip-position in $tooltip-positions {
			[class*="tooltip-wrapper-"][class*="-#{$tooltip-position}"] & {
				#{$tooltip-position}: -1rem;
				@include triangle(#{$tooltip-position});
				@if $tooltip-position == top {
					transform: translateX(-50%) translateY(-100%);
				} @else if $tooltip-position == bottom {
					transform: translateX(-50%) translateY(100%);
				} @else if $tooltip-position == left {
					top: 50%;
					transform: translateX(-100%) translateY(-50%);
				} @else if $tooltip-position == right {
					top: 50%;
					transform: translateX(100%) translateY(-50%);
				}
			}	
		}
		
		// Custom Styles
		@each $tooltip-style in $tooltip-styles {
		 	$tooltip-style: nth($tooltip-style, 1);
			[class*="tooltip-wrapper-"][class*="-#{$tooltip-style}"] & {
				color: tooltip-style(text-color);
				background: tooltip-style(bg-color);
				@each $position in $tooltip-positions {
					@at-root .tooltip-wrapper-#{$position}-#{$tooltip-style} .tooltip-content {
						&:after {
							border-#{$position}-color: tooltip-style(bg-color) !important;
						}
					}			
				}
			}
		}
		
	} // .tooltip-content

} // [data-tooltip]